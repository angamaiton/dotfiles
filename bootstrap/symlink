#!/usr/bin/env bash

if [[ -z "$DOTFILES" ]]; then
  # best way of getting current directory, apparently
  cd -- "$(dirname "$0")/.." || exit 1
  DOTFILES="$(pwd)"
fi
. "${DOTFILES}/lib/helpers.sh"
. "${DOTFILES}/lib/pretty.sh"
export PATH="${DOTFILES}/bin:${PATH}"

# ============================================================================
# Create paths (slow)
# ============================================================================

mkdir -p -- "${HOME}/.config"

__symlink() {
  __nan_status "Symlinking dotfiles..."

  # XDG-compatible
  nan-symlink "git/dot.gitconfig" ".config/git/config"
  nan-symlink "git/dot.gitignore" ".config/git/ignore"

  # (n)vim
  nan-symlink  "vim" ".vim"
  nan-symlink  "vim" ".config/nvim"

  case "$OSTYPE" in
    darwin*)
      nan-symlink "system/macOS/dot.hushlogin" ".hushlogin"
    ;;
  esac

  # Shell
  nan-symlink "zsh/dot.zshenv" ".zshenv"

  __nan_status "Done! [symlink.sh]"
}

__symlink